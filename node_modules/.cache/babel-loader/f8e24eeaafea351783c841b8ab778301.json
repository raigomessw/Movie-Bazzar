{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\raibr\\\\Documents\\\\Meus Projetos\\\\Movie-Bazzar\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\raibr\\\\Documents\\\\Meus Projetos\\\\Movie-Bazzar\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\raibr\\\\Documents\\\\Meus Projetos\\\\Movie-Bazzar\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\raibr\\\\Documents\\\\Meus Projetos\\\\Movie-Bazzar\\\\src\\\\routes\\\\filmsInfo\\\\Comments.jsx\";\n\nimport React, { useState, useEffect } from \"react\";\nimport \"../filmsInfo/Comments.css\";\nimport { saveComm } from \"../../features/firebaseFunctions\";\nimport db from \"../../features/firebaseConfig\"; //import firebase from 'firebase/app';\n\nvar Comments = function Comments(_ref) {\n  var film = _ref.film;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      commentlist = _useState2[0],\n      setCommentlist = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      comm = _useState4[0],\n      setComm = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      name = _useState6[0],\n      setName = _useState6[1];\n\n  var saveComment = function saveComment() {\n    try {\n      var data = {\n        name: name,\n        comment: comm,\n        filmId: film.id\n      };\n      saveComm(data);\n      cleardata();\n    } catch (error) {// console.log(error)\n    }\n  };\n\n  var cleardata = function cleardata() {\n    setComm(\" \");\n    setName(\" \");\n  };\n\n  useEffect(function () {\n    fetchComments(film);\n  }, []);\n\n  var fetchComments = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(film) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              db.collection(\"comments\").where(\"filmId\", \"==\", film.id).onSnapshot(function (querySnapshot) {\n                var filmcoms = [];\n                querySnapshot.forEach(function (doc) {\n                  filmcoms.push(doc.data());\n                });\n                setCommentlist(filmcoms);\n              });\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function fetchComments(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-body\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"com-h2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }\n  }, \"Comments\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-index\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, commentlist.map(function (item, index) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"comment-list\",\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"comment-div\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"user\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 19\n      }\n    }, item.name), /*#__PURE__*/React.createElement(\"a\", {\n      style: font.w,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 54\n      }\n    }, \":\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"user-comment\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 77\n      }\n    }, item.comment)));\n  })), /*#__PURE__*/React.createElement(\"form\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-div\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"inputC\",\n    type: \"text\",\n    required: true,\n    value: name,\n    onChange: function onChange(e) {\n      return setName(e.target.value);\n    },\n    placeholder: \"Write your name here\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"inputC\",\n    type: \"text\",\n    required: true,\n    value: comm,\n    onChange: function onChange(e) {\n      return setComm(e.target.value);\n    },\n    placeholder: \"Write your comment here\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"comment-button\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: saveComment,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }, \"Leave a comment\"))));\n};\n\nexport default Comments;","map":{"version":3,"names":["React","useState","useEffect","saveComm","db","Comments","film","commentlist","setCommentlist","comm","setComm","name","setName","saveComment","data","comment","filmId","id","cleardata","error","fetchComments","collection","where","onSnapshot","querySnapshot","filmcoms","forEach","doc","push","map","item","index","font","w","e","target","value"],"sources":["C:/Users/raibr/Documents/Meus Projetos/Movie-Bazzar/src/routes/filmsInfo/Comments.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"../filmsInfo/Comments.css\";\r\nimport { saveComm } from \"../../features/firebaseFunctions\";\r\nimport db from \"../../features/firebaseConfig\";\r\n//import firebase from 'firebase/app';\r\n\r\n\r\nconst Comments = ({ film }) => {\r\n  const [commentlist, setCommentlist] = useState([]);\r\n\r\n\r\n  const [comm, setComm] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n\r\n  const saveComment = () => {\r\n    try {\r\n      const data = { name: name, comment: comm, filmId: film.id }\r\n      saveComm(data)\r\n      cleardata()\r\n    } catch (error) {\r\n      // console.log(error)\r\n    }\r\n  }\r\n\r\n\r\n  const cleardata = () => {\r\n    setComm(\" \");\r\n    setName(\" \");\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchComments(film);\r\n\r\n  }, []);\r\n\r\n  const fetchComments = async (film) => {\r\n    db.collection(\"comments\").where(\"filmId\", \"==\", film.id)\r\n      .onSnapshot((querySnapshot) => {\r\n        var filmcoms = [];\r\n        querySnapshot.forEach((doc) => {\r\n          filmcoms.push(doc.data());\r\n        });\r\n        setCommentlist(filmcoms);\r\n      })\r\n  };\r\n\r\n\r\n  return (\r\n    <div className=\"comment-body\">\r\n      <div className=\"comment-container\">\r\n\r\n        <div className=\"com-h2\">\r\n          <h2>Comments</h2>\r\n        </div>\r\n\r\n        <div className=\"comment-index\">\r\n          {commentlist.map((item, index) => {\r\n            return (\r\n              <div className=\"comment-list\" key={index}>\r\n                <div className=\"comment-div\">\r\n                  <p className=\"user\">{item.name}</p><a style={font.w}>:</a><p className=\"user-comment\">{item.comment}</p>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        <form>\r\n          <div className=\"input-container\">\r\n            <div className=\"input-div\">\r\n              <input className=\"inputC\" type=\"text\" required value={name} onChange={(e) => setName(e.target.value)} placeholder=\"Write your name here\" ></input>\r\n              <input className=\"inputC\" type=\"text\" required value={comm} onChange={(e) => setComm(e.target.value)} placeholder=\"Write your comment here\" ></input>\r\n            </div>\r\n          </div>\r\n        </form>\r\n\r\n        <div className=\"comment-button\">\r\n          <button onClick={saveComment}>Leave a comment</button>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Comments;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}